<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AllLife - R25k Accidental Cover</title>

    <!-- Developed by: Tseka Junior, Lead Generation Support/DevOps -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap');
        
        /* just basic setup dont touch */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        
        .font-display {
            font-family: 'Merriweather', serif;
        }
        
        .bg-brand-blue { background-color: #0d2c54; } 
        .text-brand-blue { color: #0d2c54; } 
        .border-brand-blue { border-color: #0d2c54; }

        .bg-brand-action { background-color: #1a73e8; }
        .hover\:bg-brand-action-dark:hover { background-color: #1558b8; }
        .text-brand-action { color: #1a73e8; }
        .border-brand-action { border-color: #1a73e8; }
        .ring-brand-action:focus { --tw-ring-color: #1a73e8; }

        .bg-brand-secondary-blue { background-color: #e3f2fd; } 
        .text-brand-secondary-blue { color: #42a5f5; } 

        .bg-white-card { background-color: #ffffff; }

        /* this took me way too long to figure out honestly */
        .cover-meter-base {
            width: 300px; 
            height: 150px; 
            border-radius: 150px 150px 0 0;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            background: conic-gradient(from 270deg at 50% 100%, 
                #ef4444 0deg 29deg,  
                white 29deg 30deg,    
                #f97316 30deg 59deg, 
                white 59deg 60deg,    
                #fbbf24 60deg 89deg, 
                white 89deg 90deg,    
                #a3e635 90deg 119deg, 
                white 119deg 120deg,  
                #4ade80 120deg 149deg, 
                white 149deg 150deg,    
                #16a34a 150deg 180deg  
            );
        }
        
        .cover-meter-inner {
            width: 220px; 
            height: 110px; 
            background: #f8fafc; 
            border-radius: 110px 110px 0 0;
            position: absolute;
            bottom: 0;
            left: 40px; 
            box-shadow: inset 0 4px 6px -1px rgba(0, 0, 0, 0.1); 
        }

        .cover-meter-needle {
            width: 6px;
            height: 125px; 
            background: #1e293b; 
            border-radius: 50% 50% 0 0;
            position: absolute;
            bottom: 0;
            left: 147px; 
            transform-origin: bottom center;
            transition: transform 3s cubic-bezier(0.2, 0.8, 0.2, 1); 
            transform: rotate(-90deg); 
            z-index: 10;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
        
        .cover-meter-needle::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #1e293b;
            border-radius: 50%;
            bottom: -10px;
            left: -7px;
        }

        .rotate-green { transform: rotate(75deg) !important; } 
        .rotate-red { transform: rotate(-60deg) !important; } 

        .hover-pop {
            transition: all 0.3s ease;
        }
        .hover-pop:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .hover-card-strong {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }
        .hover-card-strong:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: #1a73e8;
            background-color: #f8fbff;
        }

        .btn-grow {
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        .btn-grow:hover {
            transform: scale(1.05);
        }
        
        .button-link {
            display: inline-block;
            text-align: center;
            padding-top: 1rem;
            padding-bottom: 1rem;
            padding-left: 2rem;
            padding-right: 2rem;
            border-radius: 0.5rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
        }

        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes ticker {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-100%, 0, 0); }
        }
        
        .ticker-wrap {
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
        }
        
        .ticker-move {
            display: inline-block;
            padding-left: 100%;
            animation: ticker 115s linear infinite;
        }
        
        .ticker-item {
            display: inline-block;
            padding: 0 2rem;
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .notification-toast {
            animation: slideInLeft 0.5s ease-out forwards;
        }
        .notification-exit {
            animation: fadeOut 0.5s ease-out forwards;
        }

    </style>
</head>
<body class="antialiased flex flex-col min-h-screen">

    <!-- top bit -->
    <header class="bg-brand-blue shadow-md sticky top-0 z-50">
        <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <img 
                        src="alllife_logo.png" 
                        alt="AllLife" 
                        class="h-11 w-auto bg-white p-2 rounded-md shadow-sm cursor-pointer hover:opacity-90 transition-opacity"
                        onclick="switchScreens('landingPage')"
                        onerror="this.src='https://placehold.co/120x50?text=AllLife'; this.style.backgroundColor='white';"
                    >
                </div>
            </div>
        </nav>
    </header>

    <!-- popup for errors lol -->
    <div id="angryRedBox" class="hidden fixed top-24 right-4 bg-red-600 text-white p-4 rounded-lg shadow-xl z-50 animate-bounce"></div>

    <main class="flex-grow max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 mt-4 w-full">

       
        <section id="landingPage" class="animate-fade-in">
            
            <div class="relative rounded-2xl shadow-2xl overflow-hidden mb-4 h-96"> 
                <img src="https://images.unsplash.com/photo-1542037104857-ffbb0b9155fb?q=80&w=2554&auto=format&fit=crop" 
                     alt="Family" 
                     class="absolute inset-0 w-full h-full object-cover z-0">
                <div class="absolute inset-0 bg-gradient-to-r from-black/70 to-transparent z-10"></div>
                
                <div class="relative text-left z-20 p-8 md:p-16 h-full flex flex-col justify-center">
                    <h1 class="text-4xl md:text-5xl font-extrabold text-white leading-tight drop-shadow-lg">Get R25,000 Accidental<br>Cover for 12 Months. On Us.</h1>
                    <p class="mt-4 text-xl text-white font-medium drop-shadow-md max-w-lg">Peace of mind for you and your family, at <strong>zero cost to you</strong>. Find out if you qualify in 60 seconds.</p>
                </div>
            </div>

        
            <div class="mb-10 text-center">
                <button id="mainStartBtn" class="bg-brand-action hover:bg-brand-action-dark text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition duration-300 btn-grow w-full md:w-auto">
                    Check if I Qualify
                </button>
            </div>

            <!-- ticker text -->
            <div class="bg-white text-slate-900 rounded-xl shadow-md p-4 mb-10 mx-0 md:mx-4 flex items-center overflow-hidden border-2 border-slate-300 border-l-8 border-l-slate-900">
                <div class="flex-shrink-0 bg-slate-900 text-white px-3 py-1 rounded text-xs font-bold uppercase tracking-wider mr-3 shadow-sm">
                    FACTS
                </div>
                <div class="ticker-wrap">
                    <div class="ticker-move">
                        <span id="scrollingTextThing" class="text-lg font-extrabold tracking-wide text-slate-800"></span>
                    </div>
                </div>
            </div>

            <div class="bg-white-card rounded-xl shadow-lg p-8 md:p-10">
                <h2 class="text-3xl font-bold text-center text-brand-blue mb-2">How It Works</h2>
                <p class="text-center text-slate-400 text-sm mb-10">(Click on a step below to jump directly to it)</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center mb-12">
                
                    <div onclick="switchScreens('checkingPage')" class="hover-pop relative flex flex-col items-center p-6 rounded-lg bg-slate-50 border border-slate-100 cursor-pointer">
                        <span class="absolute top-3 right-3 bg-blue-100 text-brand-blue text-xs font-bold px-2 py-1 rounded">Step 1</span>
                        <div class="flex items-center justify-center h-20 w-20 rounded-full bg-brand-secondary-blue text-brand-blue mb-4 shadow-sm">
                            <svg class="h-10 w-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-brand-blue mb-2">Quick Check</h3>
                        <p class="text-slate-600">Answer a few simple questions.</p>
                    </div>
                    
                    
                    <div onclick="switchScreens('checkingPage')" class="hover-pop relative flex flex-col items-center p-6 rounded-lg bg-slate-50 border border-slate-100 cursor-pointer">
                        <span class="absolute top-3 right-3 bg-blue-100 text-brand-blue text-xs font-bold px-2 py-1 rounded">Step 2</span>
                        <div class="flex items-center justify-center h-20 w-20 rounded-full bg-brand-secondary-blue text-brand-blue mb-4 shadow-sm">
                            <svg class="h-10 w-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-brand-blue mb-2">See Your Status</h3>
                        <p class="text-slate-600">Instantly see your 'Cover Meter' result.</p>
                    </div>
                    
                
                    <div onclick="goToAppPart()" class="hover-pop relative flex flex-col items-center p-6 rounded-lg bg-slate-50 border border-slate-100 cursor-pointer">
                        <span class="absolute top-3 right-3 bg-blue-100 text-brand-blue text-xs font-bold px-2 py-1 rounded">Step 3</span>
                        <div class="flex items-center justify-center h-20 w-20 rounded-full bg-yellow-100 text-yellow-600 mb-4 shadow-sm ring-4 ring-yellow-50">
                            <svg class="h-10 w-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-brand-blue mb-2">Activate Cover</h3>
                        <p class="text-slate-600">Activate your cover instantly online.</p>
                    </div>
                </div>

                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 border-t border-slate-100 pt-10">
                    
                
                    <div class="flex flex-col gap-6">
                        <div class="hover-card-strong flex gap-4 bg-white border border-slate-100 rounded-xl p-5 shadow-sm">
                            <div class="flex-shrink-0">
                                <div class="h-12 w-12 rounded-full bg-blue-50 text-brand-action flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-bold text-brand-blue text-lg mb-1">What is Accidental Cover?</h4>
                                <p class="text-slate-600 text-sm leading-relaxed">This policy pays out for any accidental death. This includes things like car accidents, slips and falls, drowning, fire-related accidents or violence.</p>
                            </div>
                        </div>

                        <div class="hover-card-strong flex gap-4 bg-white border border-slate-100 rounded-xl p-5 shadow-sm">
                            <div class="flex-shrink-0">
                                <div class="h-12 w-12 rounded-full bg-blue-50 text-brand-action flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-bold text-brand-blue text-lg mb-1">No Premiums for 12 Months</h4>
                                <p class="text-slate-600 text-sm leading-relaxed">This cover is yours for a full year. There are <strong>no premiums and no cost</strong> to you. No strings attached.</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-emerald-50 border border-emerald-100 rounded-xl p-6 flex flex-col justify-center shadow-sm hover:shadow-lg transition-shadow duration-300">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="bg-emerald-100 p-2 rounded-full">
                                <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                            </div>
                            <h4 class="font-bold text-emerald-800 text-xl">Why Is This Important?</h4>
                        </div>
                        
                        <p class="text-emerald-700 mb-4 font-medium">In South Africa, accidents are a daily reality:</p>
                        <ul class="space-y-3">
                            <li class="flex items-start gap-3 text-emerald-800 text-sm">
                                <svg class="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path></svg>
                                South Africa has one of the highest road accident rates in the world.
                            </li>
                            <li class="flex items-start gap-3 text-emerald-800 text-sm">
                                <svg class="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path></svg>
                                Accidents at home or work, like slips and falls, are tragically common.
                            </li>
                            <li class="flex items-start gap-3 text-emerald-800 text-sm">
                                <svg class="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path></svg>
                                Unforeseen events can leave a family financially vulnerable. This cover provides a crucial safety net.
                            </li>
                        </ul>
                    </div>

                </div>

                <div class="text-center mt-12">
                    <button id="bottomStartBtn" class="btn-grow w-full md:w-auto bg-brand-action hover:bg-brand-action-dark text-white font-bold py-4 px-12 rounded-full shadow-lg text-xl transition duration-300">
                        See If I Qualify
                    </button>
                </div>
            </div>
        </section>


        <section id="checkingPage" class="hidden">
            <div class="bg-white-card rounded-xl shadow-lg overflow-hidden">
                <div class="h-40 w-full relative">
                    <img src="https://images.unsplash.com/photo-1476703993599-0035a21b17a9?q=80&w=2670&auto=format&fit=crop" 
                         alt="Protected Family" 
                         class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-brand-blue/60 flex items-center justify-center">

                        <h3 class="font-display text-white text-3xl font-bold px-4 text-center drop-shadow-md">Protecting what matters most</h3>
                    </div>
                </div>

                <div class="p-8 md:p-10">
                    <button class="text-sm text-brand-action hover:underline mb-6 font-semibold" onclick="switchScreens('landingPage')">&larr; Back to Home</button>
                    <h2 class="text-3xl font-bold text-center text-brand-blue mb-8">Let's Check Your Status</h2>
                    
                    <div class="max-w-lg mx-auto">
                        <div class="space-y-6">
                            <div>
                                <label for="ageInput" class="block text-sm font-bold text-slate-700 mb-1">How old are you?</label>
                                <input type="number" id="ageInput" name="age" class="w-full rounded-lg border-slate-300 shadow-sm focus:border-brand-action focus:ring-brand-action p-3 border" placeholder="e.g., 35" required>
                            </div>

                            <div>
                                <label for="contactInput" class="block text-sm font-bold text-slate-700 mb-1">Contact Number</label>
                                <input type="tel" id="contactInput" name="contact" class="w-full rounded-lg border-slate-300 shadow-sm focus:border-brand-action focus:ring-brand-action p-3 border" placeholder="082 123 4567" required>
                            </div>

                            <div>
                                <label for="altContactInput" class="block text-sm font-bold text-slate-700 mb-1">Alternative Contact Number <span class="text-xs font-normal text-slate-500">(Optional)</span></label>
                                <input type="tel" id="altContactInput" name="alt-contact" class="w-full rounded-lg border-slate-300 shadow-sm focus:border-brand-action focus:ring-brand-action p-3 border">
                            </div>

                            <div>
                                <label for="emailInput" class="block text-sm font-bold text-slate-700 mb-1">Email Address <span class="text-xs font-normal text-slate-500">(Optional)</span></label>
                                <input type="email" id="emailInput" name="email-check" class="w-full rounded-lg border-slate-300 shadow-sm focus:border-brand-action focus:ring-brand-action p-3 border" placeholder="you@example.com">
                            </div>

                            <div>
                                <label for="salaryInput" class="block text-sm font-bold text-slate-700 mb-1">How much do you earn per month?</label>
                                <select id="salaryInput" name="salary" class="w-full rounded-lg border-slate-300 shadow-sm focus:border-brand-action focus:ring-brand-action p-3 border" required>
                                    <option value="">Please select</option>
                                    <option value="<10k">R2,500 - R9,999</option>
                                    <option value="10k-19k">R10,000 - R19,999</option>
                                    <option value="20k-29k">R20,000 - R29,999</option>
                                    <option value="30k+">R30,000+</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-2">Are you a South African citizen?</label>
                                <div class="flex gap-6">
                                    <label class="flex items-center p-3 border rounded-lg w-full cursor-pointer hover:bg-slate-50">
                                        <input type="radio" name="citizen" id="citizenYes" value="yes" class="h-5 w-5 text-brand-action border-slate-300 focus:ring-brand-action">
                                        <span class="ml-2 text-sm font-medium text-slate-700">Yes</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg w-full cursor-pointer hover:bg-slate-50">
                                        <input type="radio" name="citizen" id="citizenNo" value="no" class="h-5 w-5 text-brand-action border-slate-300 focus:ring-brand-action">
                                        <span class="ml-2 text-sm font-medium text-slate-700">No</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-8">
                            <button id="checkCoverBtn" class="btn-grow w-full md:w-auto bg-brand-action hover:bg-brand-action-dark text-white font-bold py-4 px-10 rounded-lg shadow-lg text-lg transition duration-300">
                                Show Cover I Qualify For
                            </button>
                        </div>
                    </div>

                    <div id="resultsArea" class="hidden mt-10 border-t-2 border-slate-100 pt-10 text-center animate-fade-in">
                        
                        <div class="flex justify-center mb-6">
                            <div class="cover-meter-base">
                                <div class="cover-meter-inner"></div>
                                <div id="spinnyNeedle" class="cover-meter-needle"></div>
                            </div>
                        </div>
                        
                        <div id="resultWords" class="mb-8"></div>
                        <div id="resultButtons" class="flex flex-col md:flex-row gap-4 justify-center items-center"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="appPage" class="hidden">
            <div class="bg-white-card rounded-xl shadow-lg overflow-hidden">

                <div class="h-80 w-full relative">
                    <img src="https://images.unsplash.com/photo-1531983412531-1f49a365ffed?q=80&w=2670&auto=format&fit=crop" 
                         alt="Mother holding child safe" 
                         class="w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-brand-blue/40 to-brand-blue/90 flex items-center justify-center">
                        <h3 class="font-display text-white text-3xl md:text-4xl font-bold px-6 text-center drop-shadow-md leading-normal">
                            Almost There...<br>
                            <span class="text-blue-100 font-normal text-2xl md:text-3xl mt-2 block font-sans">One last step to secure their future.</span>
                        </h3>
                    </div>
                </div>

                <div class="p-8 md:p-10">
                    
                    <button id="goBackBtn" class="text-sm text-brand-action hover:underline mb-6 font-semibold" onclick="switchScreens('landingPage')">&larr; Back to Home</button>
                    
                    <!-- gatekeeper div -->
                    <div id="bouncerDiv" class="mb-10 hidden relative z-20">
                        <div class="bg-slate-50 border-2 border-slate-200 rounded-xl p-6 md:p-8 shadow-xl">
                            <div class="flex items-center gap-3 mb-6">
                                <div class="bg-brand-blue text-white rounded-full h-8 w-8 flex items-center justify-center font-bold text-sm">1</div>
                                <h3 class="text-2xl font-bold text-brand-blue">Quick Eligibility Check</h3>
                            </div>
                            <p class="text-slate-600 mb-6">Before we activate your cover, we just need to verify a few quick details.</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1">Age</label>
                                    <input type="number" id="gateAge" class="w-full rounded-lg border-slate-300 shadow-sm p-3 border focus:ring-brand-action focus:border-brand-action" placeholder="e.g. 35">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1">Monthly Income</label>
                                    <select id="gateSalary" class="w-full rounded-lg border-slate-300 shadow-sm p-3 border focus:ring-brand-action focus:border-brand-action">
                                        <option value="">Please select</option>
                                        <option value="<10k">R2,500 - R9,999</option>
                                        <option value="10k-19k">R10,000 - R19,999</option>
                                        <option value="20k-29k">R20,000 - R29,999</option>
                                        <option value="30k+">R30,000+</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1">SA Citizen?</label>
                                    <select id="gateCitizen" class="w-full rounded-lg border-slate-300 shadow-sm p-3 border focus:ring-brand-action focus:border-brand-action">
                                        <option value="">Please select</option>
                                        <option value="yes">Yes</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                            </div>

                            <button onclick="checkEligibility()" class="w-full bg-brand-blue hover:bg-slate-800 text-white font-bold py-3 rounded-lg transition shadow-md">
                                Show Cover I Qualify For
                            </button>
                            
                            <div id="nopeMsg" class="hidden mt-4 p-4 bg-red-50 text-red-700 border-l-4 border-red-500 rounded"></div>
                        </div>
                    </div>

                    
                    <div id="realFormDiv" class="transition-all duration-700 ease-in-out">
                        <div class="flex items-center gap-3 mb-6 border-b border-slate-100 pb-4">
                            <h2 class="text-3xl font-bold text-brand-blue">Secure Your 12-Month Cover</h2>
                        </div>
                        
                        <p class="text-slate-600 mb-8 text-lg">Please confirm your details below to activate your cover instantly.</p>

                        <form class="max-w-lg mx-auto space-y-5">
                            <h3 class="text-lg font-bold text-brand-blue border-b border-slate-200 pb-2">Your Details</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="fName" class="block text-sm font-medium text-slate-700">First Name</label>
                                    <input type="text" id="fName" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                                </div>
                                <div>
                                    <label for="sName" class="block text-sm font-medium text-slate-700">Surname</label>
                                    <input type="text" id="sName" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                                </div>
                            </div>
                            <div>
                                <label for="idNum" class="block text-sm font-medium text-slate-700">ID Number</label>
                                <input type="text" id="idNum" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border" placeholder="Your 13-digit SA ID">
                                <p class="text-xs text-slate-500 mt-1">Entering your ID will automatically calculate your Date of Birth and Age.</p>
                            </div>
                            
                            <!-- dob logic -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="birthDate" class="block text-sm font-medium text-slate-700">Date of Birth</label>
                                    <input type="date" id="birthDate" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                                </div>
                                <div>
                                    <label for="howOld" class="block text-sm font-medium text-slate-700">Age</label>
                                    <input type="text" id="howOld" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border bg-slate-100 text-slate-500 font-bold" readonly>
                                </div>
                            </div>

                            <div>
                                <label for="phoneNum" class="block text-sm font-medium text-slate-700">Contact Number</label>
                                <input type="tel" id="phoneNum" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                            </div>

                            <div>
                                <label for="otherPhone" class="block text-sm font-medium text-slate-700">Alternative Contact Number <span class="text-xs font-normal text-slate-500">(Optional)</span></label>
                                <input type="tel" id="otherPhone" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                            </div>

                            <div>
                                <label for="mailAddr" class="block text-sm font-medium text-slate-700">Email Address <span class="text-xs font-normal text-slate-500">(Optional)</span></label>
                                <input type="email" id="mailAddr" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                            </div>

                            <div>
                                <label for="moneyMaker" class="block text-sm font-medium text-slate-700">Estimated Monthly Income</label>
                                <select id="moneyMaker" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border">
                                    <option value="">Please select</option>
                                    <option value="<10k">R2,500 - R9,999</option>
                                    <option value="10k-19k">R10,000 - R19,999</option>
                                    <option value="20k-29k">R20,000 - R29,999</option>
                                    <option value="30k+">R30,000+</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Are you a South African citizen?</label>
                                <div class="flex gap-6">
                                    <label class="flex items-center p-3 border rounded-lg w-full cursor-pointer hover:bg-slate-50">
                                        <input type="radio" name="app-citizen" id="citizenYesApp" value="yes" class="h-5 w-5 text-brand-action border-slate-300 focus:ring-brand-action" checked>
                                        <span class="ml-2 text-sm font-medium text-slate-700">Yes</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg w-full cursor-pointer hover:bg-slate-50">
                                        <input type="radio" name="app-citizen" id="citizenNoApp" value="no" class="h-5 w-5 text-brand-action border-slate-300 focus:ring-brand-action">
                                        <span class="ml-2 text-sm font-medium text-slate-700">No</span>
                                    </label>
                                </div>
                            </div>

                            <div class="flex items-start pt-4 bg-slate-50 p-4 rounded-lg">
                                <input id="agreed" name="terms" type="checkbox" class="h-5 w-5 text-brand-action border-slate-300 rounded mt-1">
                                <label for="agreed" class="ml-3 block text-sm text-slate-700">
                                    I understand this is a 12-month cover at no cost and I accept the <a href="2024.pdf" target="_blank" class="text-brand-action hover:underline font-bold">Terms & Conditions</a>.
                                </label>
                            </div>

                            <div class="text-center pt-6">
                                <button type="button" onclick="switchScreens('yaySection')" class="btn-grow w-full md:w-auto bg-brand-action hover:bg-brand-action-dark text-white font-bold py-4 px-10 rounded-lg shadow-lg text-lg transition duration-300">
                                    Activate My Cover Now
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        

        <section id="yaySection" class="hidden animate-fade-in">
            <div class="bg-white-card rounded-xl shadow-xl overflow-hidden">
                
                <div class="h-80 w-full relative">
                    <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=2664&auto=format&fit=crop" 
                         alt="Happy Family Celebrating Cover" 
                         class="w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-gradient-to-b from-transparent to-white"></div>
                </div>

                <div class="px-10 pb-16 -mt-12 relative z-10 text-center">
                    <div class="flex items-center justify-center h-24 w-24 rounded-full bg-green-100 text-green-600 mx-auto mb-6 shadow-lg ring-4 ring-white">
                        <svg class="h-12 w-12" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg>
                    </div>
                    
                    <h2 class="text-4xl font-extrabold text-brand-blue mb-4">Congratulations!</h2>
                    <p class="text-xl text-slate-600 mb-8 max-w-2xl mx-auto">Your R25,000 12-Month Accidental Cover is active. A confirmation email and policy documents will be sent to you shortly.</p>
                    
                    <div class="border-t border-slate-200 my-8"></div>

                    <div class="bg-blue-50 border border-blue-100 rounded-xl p-8 max-w-3xl mx-auto shadow-sm">
                        <h3 class="text-2xl font-bold text-brand-blue mb-2">Share the Peace of Mind</h3>
                        <p class="text-slate-600 mb-6">Do you have a loved one who needs this cover? Refer them now so they can get covered too.</p>
                        
                        <div id="referralBtnArea">
                            <button onclick="toggleReferral()" class="btn-grow bg-brand-action hover:bg-brand-action-dark text-white font-bold py-3 px-8 rounded-full shadow-md transition">
                                Yes, Refer a Loved One
                            </button>
                        </div>

                        <form id="referralForm" class="hidden space-y-4 mt-6 text-left max-w-md mx-auto" onsubmit="sendReferral(event)">
                            <div>
                                <label class="block text-sm font-medium text-slate-700">Friend's Name & Surname</label>
                                <input type="text" id="friendName" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border bg-white">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700">Friend's Contact Number</label>
                                <input type="tel" id="friendContact" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border bg-white" placeholder="082 123 4567">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700">Friend's Email Address <span class="text-slate-400 font-normal">(Optional)</span></label>
                                <input type="email" id="friendEmail" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-3 border bg-white" placeholder="friend@example.com">
                            </div>

                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-md shadow transition">
                                Send Referral
                            </button>
                        </form>

                        <div id="referralDone" class="hidden mt-6 bg-green-100 text-green-800 p-4 rounded-lg">
                            <strong>Thank You!</strong> We will reach out to your loved one shortly.
                        </div>
                    </div>

                    
                    <div class="mt-10 flex flex-col items-center gap-4">
                        <button onclick="openSummary()" class="text-brand-action hover:underline font-bold text-lg">
                            View My Policy Information
                        </button>
                        
                        <button onclick="switchScreens('landingPage')" class="text-slate-500 hover:text-brand-action font-medium transition">&larr; Back to Home</button>
                    </div>
                </div>
            </div>
        </section>

    </main>


    <section class="bg-slate-50 border-t border-slate-200 mt-8 py-8">
        <div class="max-w-5xl mx-auto px-6 text-center">
            <div class="inline-flex flex-col items-center justify-center gap-2">
                <p class="text-sm text-slate-500 font-medium uppercase tracking-wider">Trusted by South Africans</p>
                
                <a href="https://www.hellopeter.com/alllife" target="_blank" class="flex flex-wrap justify-center items-center gap-3 bg-white px-6 py-3 rounded-full shadow-sm border border-slate-100 hover:shadow-md hover:bg-slate-50 transition-all cursor-pointer no-underline">
                    <div class="flex items-center gap-1">
                        <span class="font-extrabold text-slate-800 text-xl tracking-tight">hello<span class="text-[#00d084]">peter</span></span>
                    </div>
                    <div class="hidden sm:block h-6 w-px bg-slate-200 mx-2"></div>
                    <div class="flex text-yellow-400">
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    </div>
                    <span class="font-bold text-slate-700 ml-1">4.84/5</span>
                </a>
                <p class="text-xs text-slate-400 mt-1">Based on 4,828+ reviews</p>
            </div>
        </div>
    </section>

   
    <footer class="bg-brand-blue text-white py-10 border-t border-blue-900 mb-0">
        <div class="max-w-6xl mx-auto px-6 text-sm text-blue-200">
            <div class="flex flex-col md:flex-row justify-between items-center md:items-start mb-8 gap-8">
               <div class="max-w-sm text-center md:text-left">
                    
                
                   <img src="alllife-light-logo-new.png" alt="AllLife" class="h-12 mb-4 w-auto mx-auto md:mx-0" onerror="this.src='https://placehold.co/120x50/0d2c54/white?text=AllLife'">
                   
                   <p>Pioneering life insurance for people living with chronic conditions.</p>
               </div>

               <div class="flex flex-col items-center md:items-end">
                   <span class="text-xs text-blue-300 mb-2 uppercase tracking-widest">Underwritten By</span>
                   
                   <img src="omart.png" alt="Old Mutual Alternative Risk Transfer" class="h-12 w-auto rounded p-2 shadow-sm" onerror="this.src='https://placehold.co/120x50?text=OMART'">
               </div>
            </div>

            <div class="border-t border-blue-800 pt-8 text-xs leading-relaxed text-center md:text-left">
                <p class="mb-2">AllLife (Pty) Ltd is an Authorised Financial Services Provider (FSP 4946).</p>
                <p>Underwritten by Old Mutual Alternative Risk Transfer Limited (OMART), a Licensed Life Insurer and Authorised Financial Services Provider (FSP 242).</p>
                <p class="mt-4">&copy; 2025 AllLife. All rights reserved.</p>
            </div>
        </div>
    </footer>
  
    <div id="popupContainer" class="fixed bottom-6 left-6 z-40 flex flex-col gap-2 pointer-events-none"></div>

    <!-- modal thingy -->
    <div id="summaryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <h3 class="text-xl font-bold text-brand-blue">Application Details</h3>
                <button onclick="closeSummary()" class="text-slate-400 hover:text-slate-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="summaryText" class="p-6 space-y-4">
                <!-- script puts stuff here -->
            </div>
            <div class="p-6 bg-slate-50 rounded-b-xl text-center">
                <button onclick="closeSummary()" class="bg-brand-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-opacity-90">Close</button>
            </div>
        </div>
    </div>


    <script>
        const allSections = document.querySelectorAll('main > section');
        const alertBox = document.getElementById('angryRedBox');
        
        // global var for holding stuff
        let tempUserData = { contact: '', salary: '', email: '', altContact: '', age: '', citizen: '' };

        function screamAtUser(msg) {
            alertBox.textContent = msg;
            alertBox.classList.remove('hidden');
            // hide it after 3s
            setTimeout(() => { alertBox.classList.add('hidden'); }, 3000);
        }

        function switchScreens(screenId) {
            allSections.forEach(s => s.classList.add('hidden'));
            const target = document.getElementById(screenId);
            if (target) {
                target.classList.remove('hidden');
                window.scrollTo(0, 0);
            }
        }


        const btnOne = document.getElementById('mainStartBtn');
        if (btnOne) {
            btnOne.addEventListener('click', () => {
                switchScreens('checkingPage');
            });
        }
        
        const btnTwo = document.getElementById('bottomStartBtn');
        if (btnTwo) {
            btnTwo.addEventListener('click', () => {
                switchScreens('checkingPage');
            });
        }

        const btnCheck = document.getElementById('checkCoverBtn');
        if (btnCheck) {
            btnCheck.addEventListener('click', () => {
                const age = parseInt(document.getElementById('ageInput').value) || 0;
                const contact = document.getElementById('contactInput').value;
                const altContact = document.getElementById('altContactInput').value;
                const email = document.getElementById('emailInput').value;
                const salary = document.getElementById('salaryInput').value;
                const citizen = document.querySelector('input[name="citizen"]:checked')?.value;
                
                const resArea = document.getElementById('resultsArea');
                const dial = document.getElementById('spinnyNeedle');
                const words = document.getElementById('resultWords');
                const btns = document.getElementById('resultButtons');

                if (age === 0 || !contact || !citizen || !salary) {
                    screamAtUser("Please fill in all required fields.");
                    return;
                }
            
                tempUserData = { contact, salary, email, altContact, age, citizen };
                let txt = '';
                let btnHtml = '';
                let cssClass = '';

                // fail conditions
                let fails = [];
                if (age < 18 || age > 75) fails.push("you are not within the 18-75 age range");
                if (citizen === 'no') fails.push("you are not a South African citizen");
                if (salary === '<10k') fails.push("your monthly salary is below the R10,000 minimum requirement");

                if (fails.length > 0) {
                    // red needle
                    cssClass = 'rotate-red'; 
                    let reason = "Unfortunately, you don't qualify for this specific offer because " + fails.join(' and ') + ".";
                    
                    txt = `
                        <h3 class="text-3xl font-bold text-red-600 mb-3">Application Requires Review</h3>
                        <p class="text-slate-600 text-lg">${reason}</p>
                        <p class="text-slate-600 text-lg mt-2">You can explore other comprehensive cover options available on our AllLife website using the button below.</p>
                    `;
                
                    btnHtml = `
                        <a href="https://alllife.co.za/" class="btn-grow button-link w-full md:w-auto bg-slate-500 hover:bg-slate-600 shadow-lg">Explore Other Covers</a>
                    `;
                } else { 
                    // green needle
                    cssClass = 'rotate-green';
                
                    txt = `
                        <h3 class="text-3xl font-bold text-green-600 mb-3">Great news!</h3>
                        
                        <div class="bg-green-50 border border-green-200 rounded-xl p-5 mb-6 max-w-xs mx-auto shadow-inner">
                            <div class="flex justify-between items-center mb-2 opacity-70">
                                <span class="text-slate-600 font-semibold text-sm uppercase tracking-wider">Standard Price</span>
                                <span class="text-red-500 font-bold line-through text-lg">R150/pm</span>
                            </div>
                            <div class="flex justify-between items-center border-t border-green-200 pt-2">
                                <span class="text-brand-blue font-bold text-lg">Your Price</span>
                                <span class="text-green-600 font-black text-4xl">R0.00</span>
                            </div>
                        </div>

                        <p class="text-slate-600 text-lg">You pre-qualify for your R25,000 12-Month Accidental Cover, at no cost. What would you like to do next?</p>
                    `;
                
                    btnHtml = `
                        <button onclick="goToAppPart()" class="btn-grow button-link w-full md:w-auto bg-brand-action hover:bg-brand-action-dark shadow-lg">Activate My Cover</button>
                    `;
                }
                
                // reset first
                dial.className = 'cover-meter-needle'; 
                words.innerHTML = ''; 
                btns.innerHTML = ''; 

                resArea.classList.remove('hidden');
                resArea.scrollIntoView({ behavior: 'smooth' });

                // delay animation just for effect
                setTimeout(() => {
                    dial.classList.add(cssClass);
                    setTimeout(() => {
                        words.innerHTML = txt;
                        btns.innerHTML = btnHtml;
                    }, 1500); 
                }, 100);
            });
        }

        function goToAppPart() {
            // check if we have data from step 2
            const isQualified = tempUserData.salary && tempUserData.citizen;

            const bouncer = document.getElementById('bouncerDiv');
            const formContainer = document.getElementById('realFormDiv');
            const backBtn = document.getElementById('goBackBtn');

            if (!isQualified) {
                // came from home page directly
                if (backBtn) {
                    backBtn.innerHTML = '&larr; Back to Home';
                    backBtn.onclick = function() { switchScreens('landingPage'); };
                }

                // show the gatekeeper
                bouncer.classList.remove('hidden');
                
                const inputs = document.querySelectorAll('#bouncerDiv input, #bouncerDiv select');
                inputs.forEach(inp => {
                    inp.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                    
                    if (!inp.value) {
                        inp.classList.add('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                        inp.addEventListener('input', function() {
                            this.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                        }, { once: true });
                    }
                });
                
                // blur the form
                formContainer.classList.remove('hidden');
                formContainer.classList.add('blur-sm', 'opacity-40', 'pointer-events-none', 'select-none', 'grayscale');
            } else {
                // came from checking page

                if (backBtn) {
                    backBtn.innerHTML = '&larr; Back to results';
                    backBtn.onclick = function() { switchScreens('checkingPage'); };
                }

                bouncer.classList.add('hidden');
                
                // unblur
                formContainer.classList.remove('hidden');
                formContainer.classList.remove('blur-sm', 'opacity-40', 'pointer-events-none', 'select-none', 'grayscale');
                
                // prefill stuff if we have it
                document.getElementById('phoneNum').value = tempUserData.contact || '';
                document.getElementById('moneyMaker').value = tempUserData.salary || '';
                document.getElementById('otherPhone').value = tempUserData.altContact || '';
                document.getElementById('mailAddr').value = tempUserData.email || '';

                if (tempUserData.age) document.getElementById('howOld').value = tempUserData.age;
                if (tempUserData.citizen === 'yes') document.getElementById('citizenYesApp').checked = true;
                else if (tempUserData.citizen === 'no') document.getElementById('citizenNoApp').checked = true;

                const inputs = document.querySelectorAll('#appPage form input, #appPage form select');
                inputs.forEach(inp => {
                    inp.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');

                    if (inp.type !== 'hidden' && inp.type !== 'checkbox' && inp.type !== 'radio' && !inp.value) {
                        inp.classList.add('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                        inp.addEventListener('input', function() {
                            this.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                        }, { once: true });
                    }
                });
            }

            switchScreens('appPage');
        }

        function checkEligibility() {
            const age = parseInt(document.getElementById('gateAge').value) || 0;
            const salary = document.getElementById('gateSalary').value;
            const citizen = document.getElementById('gateCitizen').value;
            const msgBox = document.getElementById('nopeMsg');

            msgBox.classList.add('hidden');

            if (age === 0 || !salary || !citizen) {
                msgBox.textContent = "Please fill in all fields to check eligibility.";
                msgBox.classList.remove('hidden');
                return;
            }

            let fails = [];
            if (age < 18 || age > 75) fails.push("age is not within 18-75");
            if (citizen === 'no') fails.push("not a South African citizen");
            if (salary === '<10k') fails.push("salary below R10,000");

            const gateDiv = document.getElementById('bouncerDiv');

            if (fails.length > 0) {
                // fail animation
                gateDiv.innerHTML = `
                    <div class="text-center py-6">
                        <div class="flex justify-center mb-6 scale-75 origin-top"> 
                            <div class="cover-meter-base">
                                <div class="cover-meter-inner"></div>
                                <div id="miniSpinny" class="cover-meter-needle"></div>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold text-brand-blue mt-[-30px] mb-2" id="gateTitle">Checking Eligibility...</h3>
                        <div id="gateContent" class="opacity-0 transition-opacity duration-500">
                            <p class="text-slate-500 mb-6">Verifying your profile details.</p>
                        </div>
                    </div>
                `;

                setTimeout(() => {
                    const dial = document.getElementById('miniSpinny');
                    if(dial) dial.classList.add('rotate-red');
                    
                    setTimeout(() => {
                        const title = document.getElementById('gateTitle');
                        const content = document.getElementById('gateContent');
                        
                        if(title) {
                            title.textContent = "Application Review Required";
                            title.classList.replace('text-brand-blue', 'text-red-600');
                        }
                        
                        if(content) {
                            content.innerHTML = `
                                <p class="text-slate-600 mb-6">Unfortunately, you do not qualify for this specific offer based on the details provided.</p>
                                <div class="flex flex-col gap-4 items-center">
                                    <a href="https://alllife.co.za/" class="inline-block bg-slate-500 hover:bg-slate-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition w-full md:w-auto">
                                        Explore Other Covers
                                    </a>
                                    <button onclick="tryAgain(${age}, '${salary}', '${citizen}')" class="text-slate-400 hover:text-brand-action underline text-sm transition">
                                        I made a mistake, let me check again
                                    </button>
                                </div>
                            `;
                            content.classList.remove('opacity-0');
                        }
                    }, 1500); 

                }, 100); 

            } else {
               
                tempUserData.salary = salary;
                tempUserData.age = age;
                tempUserData.citizen = citizen;

                gateDiv.innerHTML = `
                    <div class="text-center py-6">
                        <div class="flex justify-center mb-6 scale-75 origin-top"> 
                            <div class="cover-meter-base">
                                <div class="cover-meter-inner"></div>
                                <div id="miniSpinny" class="cover-meter-needle"></div>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold text-brand-blue mt-[-30px] mb-2" id="gateTitle">Checking Eligibility...</h3>
                        <p class="text-slate-500" id="gateSub">Verifying your profile details.</p>
                    </div>
                `;

                // success animation
                setTimeout(() => {
                    const dial = document.getElementById('miniSpinny');
                    if(dial) dial.classList.add('rotate-green');
                    
                    setTimeout(() => {
                        const title = document.getElementById('gateTitle');
                        const sub = document.getElementById('gateSub');
                        if(title) {
                            title.textContent = "You Qualify!";
                            title.classList.replace('text-brand-blue', 'text-green-600');
                        }
                        if(sub) sub.textContent = "Unlocking application form...";
                    }, 1500); 

                }, 100); 

                // unlock everything
                setTimeout(() => {
                    gateDiv.classList.add('hidden');
                    
                    const formDiv = document.getElementById('realFormDiv');
                    
                    formDiv.classList.remove('blur-sm', 'opacity-40', 'pointer-events-none', 'select-none', 'grayscale');
                    formDiv.classList.add('animate-fade-in'); 

                    document.getElementById('moneyMaker').value = salary;
                    document.getElementById('howOld').value = age;
                    if(citizen === 'yes') document.getElementById('citizenYesApp').checked = true;
                    else document.getElementById('citizenNoApp').checked = true;

                    const inputs = document.querySelectorAll('#appPage form input, #appPage form select');
                    inputs.forEach(inp => {
                        inp.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                        if (inp.type !== 'hidden' && inp.type !== 'checkbox' && inp.type !== 'radio' && !inp.value) {
                            inp.classList.add('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                            inp.addEventListener('input', function() {
                                this.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
                            }, { once: true });
                        }
                    });

                    formDiv.scrollIntoView({ behavior: 'smooth' });

                }, 3500); 
            }
        }

        // if they messed up the form
        function tryAgain(oldAge, oldSalary, oldCitizen) {
            const gateDiv = document.getElementById('bouncerDiv');
            
            // just rebuilding the html string
            gateDiv.innerHTML = `
                <div class="bg-slate-50 border-2 border-slate-200 rounded-xl p-6 md:p-8 shadow-xl">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="bg-brand-blue text-white rounded-full h-8 w-8 flex items-center justify-center font-bold text-sm">1</div>
                        <h3 class="text-2xl font-bold text-brand-blue">Quick Eligibility Check</h3>
                    </div>
                    <p class="text-slate-600 mb-6">Before we activate your cover, we just need to verify a few quick details.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">Age</label>
                            <input type="number" id="gateAge" value="${oldAge}" class="w-full rounded-lg border-slate-300 shadow-sm p-3 border focus:ring-brand-action focus:border-brand-action" placeholder="e.g. 35">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">Monthly Income</label>
                            <select id="gateSalary" class="w-full rounded-lg border-slate-300 shadow-sm p-3 border focus:ring-brand-action focus:border-brand-action">
                                <option value="">Please select</option>
                                <option value="<10k" ${oldSalary === '<10k' ? 'selected' : ''}>R2,500 - R9,999</option>
                                <option value="10k-19k" ${oldSalary === '10k-19k' ? 'selected' : ''}>R10,000 - R19,999</option>
                                <option value="20k-29k" ${oldSalary === '20k-29k' ? 'selected' : ''}>R20,000 - R29,999</option>
                                <option value="30k+" ${oldSalary === '30k+' ? 'selected' : ''}>R30,000+</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">SA Citizen?</label>
                            <select id="gateCitizen" class="w-full rounded-lg border-slate-300 shadow-sm p-3 border focus:ring-brand-action focus:border-brand-action">
                                <option value="">Please select</option>
                                <option value="yes" ${oldCitizen === 'yes' ? 'selected' : ''}>Yes</option>
                                <option value="no" ${oldCitizen === 'no' ? 'selected' : ''}>No</option>
                            </select>
                        </div>
                    </div>

                    <button onclick="checkEligibility()" class="w-full bg-brand-blue hover:bg-slate-800 text-white font-bold py-3 rounded-lg transition shadow-md">
                        Show Cover I Qualify For
                    </button>
                    
                    <div id="nopeMsg" class="hidden mt-4 p-4 bg-red-50 text-red-700 border-l-4 border-red-500 rounded"></div>
                </div>
            `;
        }

        // date of birth math stuff
        function figureOutId(val) {
            const clean = val.replace(/\D/g, '');

            if (clean.length < 6) {
                 document.getElementById('birthDate').value = '';
                 document.getElementById('howOld').value = '';
                 return;
            }

            const yy = parseInt(clean.substring(0, 2));
            const mm = parseInt(clean.substring(2, 4));
            const dd = parseInt(clean.substring(4, 6));

            if (mm < 1 || mm > 12 || dd < 1 || dd > 31) return;

            const currTwo = parseInt(new Date().getFullYear().toString().substring(2, 4));
            
            let fullYr;
            if (yy <= currTwo) {
                fullYr = 2000 + yy;
            } else {
                fullYr = 1900 + yy;
            }

            const mmS = mm.toString().padStart(2, '0');
            const ddS = dd.toString().padStart(2, '0');
            const dobStr = `${fullYr}-${mmS}-${ddS}`;

            const dInput = document.getElementById('birthDate');
            dInput.value = dobStr;
            dInput.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');

            calcAge(dobStr);
        }

        function calcAge(dobVal) {
            if (!dobVal) return;

            const d = new Date(dobVal);
            const t = new Date();
            
            let a = t.getFullYear() - d.getFullYear();
            const m = t.getMonth() - d.getMonth();
            
            if (m < 0 || (m === 0 && t.getDate() < d.getDate())) {
                a--;
            }

            const aInput = document.getElementById('howOld');
            if (!isNaN(a)) {
                aInput.value = a;
                aInput.classList.remove('bg-amber-50', 'border-amber-400', 'ring-2', 'ring-amber-100');
            } else {
                aInput.value = '';
            }
        }

        function toggleReferral() {
            document.getElementById('referralBtnArea').classList.add('hidden');
            document.getElementById('referralForm').classList.remove('hidden');
        }

        function sendReferral(e) {
            e.preventDefault();
            const n = document.getElementById('friendName').value;
            const c = document.getElementById('friendContact').value;

            if(n && c) {
                document.getElementById('referralForm').classList.add('hidden');
                document.getElementById('referralDone').classList.remove('hidden');
            }
        }

        // summary modal stuff
        function openSummary() {
            const f = document.getElementById('fName').value || '-';
            const s = document.getElementById('sName').value || '-';
            const i = document.getElementById('idNum').value || '-';
            const d = document.getElementById('birthDate').value || '-';
            const a = document.getElementById('howOld').value || '-';
            const c = document.getElementById('phoneNum').value || '-';
            const ac = document.getElementById('otherPhone').value || '-';
            const e = document.getElementById('mailAddr').value || '-';
            const money = document.getElementById('moneyMaker').value || '-';
            
            let cz = '-';
            if(document.getElementById('citizenYesApp').checked) cz = 'Yes';
            else if(document.getElementById('citizenNoApp').checked) cz = 'No';

            const html = `
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div><span class="block text-slate-500 text-xs">Full Name</span><span class="font-medium text-slate-800">${f} ${s}</span></div>
                    <div><span class="block text-slate-500 text-xs">ID Number</span><span class="font-medium text-slate-800">${i}</span></div>
                    <div><span class="block text-slate-500 text-xs">Date of Birth</span><span class="font-medium text-slate-800">${d}</span></div>
                    <div><span class="block text-slate-500 text-xs">Age</span><span class="font-medium text-slate-800">${a}</span></div>
                    <div><span class="block text-slate-500 text-xs">Contact</span><span class="font-medium text-slate-800">${c}</span></div>
                    <div><span class="block text-slate-500 text-xs">Alt Contact</span><span class="font-medium text-slate-800">${ac}</span></div>
                    <div class="col-span-2"><span class="block text-slate-500 text-xs">Email</span><span class="font-medium text-slate-800">${e}</span></div>
                    <div><span class="block text-slate-500 text-xs">Monthly Income</span><span class="font-medium text-slate-800">${money}</span></div>
                    <div><span class="block text-slate-500 text-xs">SA Citizen</span><span class="font-medium text-slate-800">${cz}</span></div>
                </div>
                <div class="mt-4 pt-4 border-t border-slate-100">
                    <p class="text-xs text-green-600 font-bold flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        Status: Active
                    </p>
                </div>
            `;

            document.getElementById('summaryText').innerHTML = html;
            document.getElementById('summaryModal').classList.remove('hidden');
        }

        function closeSummary() {
            document.getElementById('summaryModal').classList.add('hidden');
        }

        const quotes = [
            "South Africa has one of the highest road accident rates globally, with <span class='font-black text-red-600'>over 12,000 fatalities</span> reported annually.",
            "You don't have to be driving to be at riskpedestrians account for <span class='font-black text-red-600'>nearly 40%</span> of all road accident fatalities.",
            "The average funeral in SA costs <span class='font-black text-brand-action'>over R20,000 upfront</span>. Accidental cover pays out cash when families need it most.",
            "The home is statistically the <span class='font-black text-brand-blue'>most common place for injuries</span>. Slips, falls and DIY accidents happen daily.",
            "For people under the age of 45, accidental injury is the <span class='font-black text-red-600'>leading cause of unexpected death</span> worldwide.",
            "<span class='font-black text-brand-action'>60% of families</span> face severe financial hardship within 12 months of losing a breadwinner to an accident.",
            "Taxi and bus commuters face <span class='font-black text-red-600'>significantly higher daily risks</span>accidents happen during the daily rush, not just on holidays."
        ];
        
        const tick = document.getElementById('scrollingTextThing');
        if (tick) {
            tick.innerHTML = quotes.join(' &nbsp;&nbsp;&bull;&nbsp;&nbsp; ') + ' &nbsp;&nbsp;&bull;&nbsp;&nbsp; ' + quotes.join(' &nbsp;&nbsp;&bull;&nbsp;&nbsp; ');
        }

        const peeps = [
            { name: "Junior", location: "Pretoria", action: "Qualified" },
            { name: "Bradley", location: "Cape Town", action: "Activated Cover" },
            { name: "Qhamile", location: "Durban", action: "Checking Status" },
            { name: "Steph", location: "Sandton", action: "Activated & Sent Referral" },
            { name: "Piet", location: "Bloemfontein", action: "Rated us 5 Star(HelloPeter)" }
        ];

        let peepIndex = 0; 

        function runPopup() {
            const container = document.getElementById('popupContainer');
            if (!container) return;

            const u = peeps[peepIndex];
            
            peepIndex = (peepIndex + 1) % peeps.length;
            
            const n = document.createElement('div');
            n.className = "notification-toast bg-white border-l-4 border-brand-action text-brand-blue p-5 rounded-xl shadow-2xl flex items-center gap-4 max-w-md transform transition-all duration-500";
            n.innerHTML = `
                <div class="h-12 w-12 rounded-full bg-blue-100 text-brand-action flex items-center justify-center font-bold text-sm">
                    ${u.name.charAt(0)}
                </div>
                <div>
                    <p class="text-base font-bold">${u.name} from ${u.location}</p>
                    <p class="text-sm text-slate-500">Just ${u.action}</p>
                </div>
            `;

            container.appendChild(n);
            
            setTimeout(() => {
                n.classList.remove('notification-toast');
                n.classList.add('notification-exit');
                setTimeout(() => n.remove(), 500);
            }, 7000);
        }

    
        setTimeout(() => {
            runPopup();
            setInterval(runPopup, 8000); 
        }, 2000);


        const idInp = document.getElementById('idNum');
        if (idInp) {
            idInp.addEventListener('input', function(e) {
                figureOutId(e.target.value);
            });
        }

        const dobInp = document.getElementById('birthDate');
        if (dobInp) {
            dobInp.addEventListener('change', function(e) {
                calcAge(e.target.value);
            });
        }

    </script>

</body>

</html>
